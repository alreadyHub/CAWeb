$=jQuery.noConflict();$(document).ready(function(){if($(".top-level-nav").css("display")=="table"){$("body").addClass("no-flex")}var o=$("#navigation.main-navigation"),x=o.find(".nav-item"),v=x.has(".sub-nav"),A=o.find(".sub-nav"),F=o.hasClass("megadropdown"),t=o.hasClass("dropdown"),G=o.hasClass("singleLevel"),w=o.hasClass("off-canvas"),g=767,p=o.hasClass("auto-highlight");var y=300,E;var k=Modernizr.touch,e=(("ontouchstart" in window)||(navigator.MaxTouchPoints>0)||(navigator.msMaxTouchPoints>0));var r=false;$(window).on("mousemove",function(){if(r){touchmode=false}});var l="",f=location.href.split("/");if(typeof defaultActiveLink!="undefined"){l=new RegExp("^"+defaultActiveLink+"$","i")}x.each(function(){var K=$(this),J=K.find(".first-level-link");if(l){if(J.text().match(l)){K.addClass("active")}}else{if(p&&J.attr("href")){var I=J[0].href.split("/");if((I.length>4)&&(f[3]==I[3])){K.addClass("active")}}}});v.each(function(){var I=$(this).find(".second-level-nav > li").length;if(I<=2){$(this).find(".sub-nav").addClass("with-few-items")}});if(F){var d=$('<div class="nav-arrow-container"><div class="nav-arrow-down"></div></div>');A.append(d)}if((F||t)&&(k||!e)){v.on("mouseenter.ca.navshow",function(){if(D()){return}if(r){return}var I=$(this);E=setTimeout(function(){var J=I.find(".sub-nav").css("display","none");J.css({opacity:0,display:"block"}).stop(true,true).delay(300).animate({opacity:1},300);c(I)},y)});v.on("mouseleave.ca.navclose",function(){if(D()){return}if(r){return}clearTimeout(E);var I=$(this).find(".sub-nav");I.animate({opacity:0},300,function(){$(this).removeAttr("style")})});if(k){$(document).on("touchstart.ca.catchNav",function(I){r=false;m()},false);v.each(function(){var L=$(this),K=L.find(".first-level-link"),I=K[0],J=L.find(".sub-nav"),M=J.find("a");K.data("link",K.attr("href")).removeAttr;L.on("touchstart.ca.propagation",function(N){N.stopPropagation()});L.on("touchstart.ca.navclose",function(N){r=true;if(J.is(":visible")||D()){}else{N.preventDefault();N.stopPropagation();c(L);m();J.fadeIn(300)}},false)})}}else{if((F||t)&&e){$(document).on("click.ca.catchNav",function(I){if(!o.is(I.target)&&o.has(I.target).length===0){m()}});v.each(function(){var L=$(this),K=L.find(".first-level-link"),I=K[0],J=L.find(".sub-nav"),M=J.find("a");K.data("link",K.attr("href"));L.on("click.ca.propagation",function(N){N.stopPropagation()});K.on("click.ca.navclose",function(N){if(J.is(":visible")||D()){}else{N.preventDefault();N.stopPropagation();c(L);m();J.fadeIn(300)}})})}}function m(){A.fadeOut(300)}function D(){return($(".global-header .mobile-controls").css("display")!=="none")}function c(J){if(F){var I=(J.offset().left-o.offset().left+J.width()/2);J.find(".nav-arrow-down").css({left:I})}}if(!G){v.each(function(){$(this).find(".first-level-link").addClass("has-sub");var I=$('<span class="mobile-control toggle-sub-nav closed"><span class="ca-gov-icon-menu-toggle-closed" aria-hidden="true"></span><span class="ca-gov-icon-menu-toggle-open" aria-hidden="true"></span><span class="sr-only">Sub Menu Toggle</span></span>');$(this).find(".sub-nav").before(I);I.click(function(){var J=$(this).parent().find(".sub-nav");if(J.is(":visible")){$(this).removeClass("open").addClass("closed");J.slideUp("fast",function(){$(this).removeAttr("style").removeClass("secondary-open")})}else{$(this).removeClass("closed").addClass("open");J.slideDown("fast",function(){$(this).removeAttr("style").addClass("secondary-open")})}})})}if(w){$("body").addClass("off-canvas-enabled");if(!$("body > .oc-outer")[0]){$("body").wrapInner('<div class="oc-outer"><div class="oc-inner"></div></div>')}var n=true,b=$(".oc-outer"),z=$(".global-header .navigation-search").addClass("oc-menu"),j=$(".mobile-controls"),h=$(".toggle-menu"),a=$(".header-decoration");function q(I){if(D()){var J=I.height()-j.height();z.height(J);a.height($(window).height())}else{z.removeAttr("style");a.removeAttr("style")}}if(n){b.addClass("scroll-menu-only")}var H=(n)?$(window):$("body");$(window).resize(function(){q(H)});q(H);$("nav a").last().blur(function(){setTimeout(function(){if(!$(document.activeElement).closest("nav.main-navigation").length){s()}},1)});h.click(function(){C()}).attr("tabindex",0).focus(function(){u()});a.click(function(){s()});function C(){if(z.hasClass("oc-menu-open")){s()}else{u()}}function u(){b.addClass("oc-menu-open")}function s(){b.removeClass("oc-menu-open");$(".toggle-sub-nav").removeClass("open").addClass("closed");$(".sub-nav").removeClass("secondary-open")}}else{$("#navigation").addClass("mobile-closed");$(".toggle-menu").click(function(){$("#navigation").toggleClass("mobile-closed");$(".search-container").removeClass("active")});$(".toggle-search").on("click",function(){$(".search-container").toggleClass("active");if(!$("#navigation").hasClass("active")){$("#navigation").addClass("mobile-closed")}})}var B="focus",i="clickedFocus";$(".top-level-nav > li > a").hover(function(){$(this).closest("ul").find("."+B).removeClass(B)},function(){$("."+i).removeClass(i)});$(".top-level-nav > li > a").focus(function(I){$(this).closest("ul").find("."+B).removeClass(B);if(!$(this).parent().find(".toggle-sub-nav").hasClass("open")){$(this).parent().addClass(B)}}).on("mousedown",function(){if(!$(this).parent().find(".toggle-sub-nav").hasClass("open")){$(this).parent().addClass(i)}});$(".top-level-nav a").last().keydown(function(I){if(I.keyCode==9){$(".top-level-nav ."+B).removeClass(B)}});$(document).click(function(){$(".top-level-nav ."+B).removeClass(B)});$(".top-level-nav").click(function(I){I.stopPropagation()})});
jQuery(document).ready(function(){$=jQuery.noConflict();var k=false;$(window).on("beforeunload",function(){if(k&&"nav-menus.php"!==args.changeCheck){return"Are you sure you want to leave?"}});$('textarea, #ca_default_navigation_menu, select, input[type="text"], input[type="checkbox"], input[type="password"] ').change(function(n){k=true});$('input[type="button"]').click(function(n){k=true});$("#ca-options-form").submit(function(){k=false;this.submit()});$(".caweb-nav-tab").click(function(){var n=document.getElementsByClassName("caweb-nav-tab");var p=this.getAttribute("name");for(i=0;i<n.length;i++){if(p!==n[i].getAttribute("name")){n[i].classList.remove("nav-tab-active");document.getElementById(n[i].getAttribute("name")).classList.add("hidden")}else{n[i].classList.add("nav-tab-active");document.getElementById(p).classList.remove("hidden")}}document.getElementById("tab_selected").value=p});$("#ca_site_version").change(function(){var u=this.options[this.selectedIndex].value;var p=document.getElementsByClassName("extra");var n=document.getElementsByClassName("base");var v=$("#general table:first tr:nth-child(6)");var w=$("#ca_site_color_scheme")[0];var q=w.options[w.selectedIndex].value;var t=false;for(var s=0;s<p.length;s++){if(u>=5){p[s].classList.remove("hidden");for(var r=0;r<n.length;r++){n[r].classList.add("hidden")}if(!$("#ca_google_search_id").val().trim()){v.addClass("hidden")}else{v.removeClass("hidden")}}else{p[s].classList.add("hidden");if(p[s].value==q&&p[s].classList.contains("extra")){t=true}for(var r=0;r<n.length;r++){n[r].classList.remove("hidden")}}}if(t){for(var s=0;s<w.options.length;s++){if(!w.options[s].classList.contains("extra")){w.selectedIndex=s;break}}}});$("#resetIcon").click(function(){var n=args.defaultFavIcon;document.getElementById("ca_fav_ico").value=n;document.getElementById("ca_fav_ico_img").src=n;document.getElementById("ca_fav_ico_filename").value="favicon.ico"});$("#ca_google_search_id").on("input",function(n){var q=$("#general table:first tr:nth-child(6)");var p=$("#ca_site_version option:selected").val();if(!this.value.trim()){q.addClass("hidden")}else{if(5<=p){q.removeClass("hidden")}}});$(".removeStyle").click(function(p){p.preventDefault();var n=confirm("Are you sure you want to "+this.title+"? This can not be undone.");if(n==true){k=true;this.parentNode.remove()}});$("#uploadedCSS").sortable();$("#uploadedCSS").disableSelection();$("#addCSS").click(function(t){var q=$("#custom-css table:first");var n=q.children().children().length;var u=document.createElement("TR");var s=document.createElement("TD");var v=document.createElement("A");var r=document.createElement("TD");var p=document.createElement("Input");u.classList="pending-stylesheet";v.classList="dashicons dashicons-dismiss removeStyle";p.type="file";p.name=n+"_upload";p.id=n+"_upload";p.accept=".css";v.addEventListener("click",function(x){x.preventDefault();var w=""!==this.title?confirm("Are you sure you want to "+this.title+"? This can not be undone."):true;if(w==true){k=true;this.parentNode.parentNode.remove()}});p.addEventListener("change",function(){var w=this.value.substring(this.value.lastIndexOf("\\")+1);var x=w.lastIndexOf(".")>0?w.substring(w.lastIndexOf(".")+1).toLowerCase():"";if(""===x||"css"!==x){alert(w+" isn't a valid CSS extension and was not uploaded.");this.parentNode.remove()}else{v.title="remove "+w}});r.append(v);r.append(p);u.append(s);u.append(r);q.append(u);k=true});$("#cawebAlerts").sortable();$("#cawebAlerts").disableSelection();$("#addAlertBanner").click(function(u){$("#caweb_alert_count").val(function(v,w){return ++w});var t=$("#cawebAlerts");var p=document.createElement("LI");var r=$("#caweb_alert_count").val();var q=document.createElement("DIV");var n=$("#caweb-alert-settings");var s=document.createElement("DIV");q.classList="caweb-alert";m(q,r);s.id="caweb-alert-"+r;s.style.display="none";g(s,r);p.appendChild(q);t.append(p);n.append(s);console.log(tinymce);tinymce.execCommand("mceAddEditor",true,"alert-message-"+r);k=true});$(".caweb-alert pre a.alert-toggle").click(function(n){b(this)});$(".removeAlert").click(function(n){c(this)});$(".alert-read-more").click(function(n){j(this)});$(".resetAlertIcon").click(function(n){a(this.parentNode.nextElementSibling)});$(".caweb-alert pre a.activateAlert").click(function(n){d(this)});var e=[];$('[class*="caweb-alert-"] .button-primary.ok').click(function(n){h(this)});$('[class*="caweb-alert-"] .button-primary.cancel').click(function(n){l(this)});function d(n){n.classList.toggle("inactive");if(n.className.includes("inactive")){n.firstElementChild.value="inactive"}else{n.firstElementChild.value="active"}}function m(n,p){var A=document.createElement("PRE");var w=document.createElement("P");var q=document.createElement("A");var z=document.createElement("A");var t=document.createElement("A");var s=document.createElement("A");var u=document.createElement("INPUT");var y=document.createElement("DIV");var r=document.createElement("INPUT");var x=document.createElement("P");var v=document.createElement("TEXTAREA");w.innerHTML="Label";q.classList="thickbox dashicons dashicons-menu";q.href="#TB_inline?width=600&height=550&modal=true&inlineId=caweb-alert-"+p;z.classList="dashicons dashicons-dismiss removeAlert";z.addEventListener("click",function(B){c(this)});t.classList="dashicons dashicons-arrow-up alert-toggle";t.addEventListener("click",function(B){b(this)});s.classList="dashicons activateAlert";s.addEventListener("click",function(B){d(this)});u.name="alert-status-"+p;u.type="hidden";s.appendChild(u);y.appendChild(r);y.appendChild(x);y.appendChild(v);r.name="alert-header-"+p;r.type="text";r.placeholder="Label";x.innerHTML="Message";v.form="ca-options-form";v.name="alert-message-"+p;v.id="alert-message-"+p;A.appendChild(w);A.appendChild(z);A.appendChild(q);A.appendChild(t);A.appendChild(s);n.appendChild(A);n.appendChild(y)}function g(E,G){var F=document.createElement("FORM");var O=document.createElement("H3");var A=document.createElement("P");var z=document.createElement("LABEL");var H=document.createElement("INPUT");var x=document.createElement("LABEL");var I=document.createElement("INPUT");var J=document.createElement("P");var y=$("#ca_site_color_scheme")[0];var N=y.options[y.selectedIndex].value;var P=document.createElement("INPUT");var p=document.createElement("P");var w=document.createElement("LABEL");var t=document.createElement("INPUT");var M=document.createElement("DIV");var q=document.createElement("P");var n=document.createElement("INPUT");var K=document.createElement("LABEL");var v=document.createElement("LABEL");var u=document.createElement("LABEL");var L=document.createElement("INPUT");var S=document.createElement("INPUT");var C=document.createElement("P");var D=document.createElement("SPAN");var s=document.createElement("UL");var r=document.createElement("INPUT");var Q=document.createElement("A");var B=document.createElement("A");F.classList="caweb-alert-"+G;O.innerHTML="Alert Settings";A.innerHTML="Display on";H.type="radio";H.name="alert-display-"+G;H.value="home";H.checked=true;z.appendChild(H);z.appendChild(document.createTextNode("Home Page Only"));I.type="radio";I.name="alert-display-"+G;I.value="all";x.appendChild(I);x.appendChild(document.createTextNode("All Pages"));J.innerHTML="Banner Color";P.type="color";P.name="alert-banner-color-"+G;P.value=args.caweb_colors[N]["highlight"];w.innerHTML="Add Read More Button ";t.type="checkbox";t.classList="alert-read-more";t.name="alert-read-more-"+G;t.addEventListener("click",function(T){j(this)});w.appendChild(t);p.appendChild(w);q.innerHTML="Read More Button URL";n.type="text";n.name="alert-read-more-url-"+G;K.innerHTML="Open link in";L.type="radio";L.name="alert-read-more-target-"+G;L.checked=true;L.value="_blank";S.type="radio";S.name="alert-read-more-target-"+G;S.value="";v.appendChild(L);v.appendChild(document.createTextNode("New Tab "));u.appendChild(S);u.appendChild(document.createTextNode("Current Tab"));M.classList="hidden";M.appendChild(q);M.appendChild(n);M.appendChild(K);M.appendChild(v);M.appendChild(u);C.innerHTML="Add Icon ";D.classList="dashicons dashicons-image-rotate resetAlertIcon";D.addEventListener("click",function(T){a(this.parentNode.nextElementSibling)});C.appendChild(D);s.id="caweb-icon-menu";for(i=0;i<args.caweb_icons.length;i++){var R=document.createElement("LI");R.classList="icon-option ca-gov-icon-"+args.caweb_icons[i];R.title=args.caweb_icons[i];R.addEventListener("click",function(T){f(this)});s.appendChild(R)}r.name="alert-icon-"+G;r.type="hidden";s.appendChild(r);Q.className="button button-primary ok";Q.innerHTML="Ok";Q.addEventListener("click",function(T){h(this)});B.className="button button-primary cancel";B.innerHTML="Cancel";B.addEventListener("click",function(T){l(this)});F.appendChild(O);F.appendChild(A);F.appendChild(z);F.appendChild(x);F.appendChild(J);F.appendChild(P);F.appendChild(p);F.appendChild(M);F.appendChild(C);F.appendChild(s);F.appendChild(Q);F.appendChild(B);E.appendChild(F)}function b(n){n.parentNode.nextElementSibling.classList.toggle("hidden");n.parentNode.parentNode.nextElementSibling.classList.toggle("hidden");if(n.parentNode.nextElementSibling.classList.contains("hidden")){n.parentNode.firstElementChild.innerHTML=""!==n.parentNode.nextElementSibling.firstElementChild.value.trim()?n.parentNode.nextElementSibling.firstElementChild.value:"Header";n.classList.remove("dashicons-arrow-up");n.classList.add("dashicons-arrow-down")}else{n.parentNode.firstElementChild.innerHTML="Header";n.classList.remove("dashicons-arrow-down");n.classList.add("dashicons-arrow-up")}}function c(p){var n=confirm("Are you sure you want to remove this alert? This can not be undone.");if(n==true){k=true;p.parentNode.parentNode.parentNode.remove()}}function j(n){n.parentNode.parentNode.nextSibling.classList.toggle("hidden")}function h(u){var p=u.parentNode.className.substring(u.parentNode.className.lastIndexOf("-")+1);var n=u.parentNode.getElementsByTagName("INPUT");var s={};for(var r=0;r<n.length;r++){var q=n[r];if((q.name.includes("alert-display-")&&q.checked)||(q.name.includes("alert-read-more-target-")&&q.checked)){s[q.name]=q.value}else{if(!q.name.includes("alert-display-")&&!q.name.includes("alert-read-more-target-")){if(q.name.includes("alert-icon-")){var t=q.parentNode.getElementsByClassName("selected");if(0<t.length){f($(t[0])[0]);q.value=q.parentNode.getElementsByClassName("selected")[0].title}else{q.value=""}}s[q.name]=q.name.includes("alert-read-more-")&&!q.name.includes("alert-read-more-url-")?q.checked:q.value}}}e[p]=s;tb_remove()}function l(v){var p=v.parentNode.className.substring(v.parentNode.className.lastIndexOf("-")+1);var n=v.parentNode.getElementsByTagName("INPUT");if(undefined!==e[p]){Object.keys(e[p]).forEach(function(z){var y=e[p][z];var w=$('[name="'+z+'"]')[0];if(z.includes("alert-display-")){$('[name="'+z+'"][value="'+y+'"]')[0].checked=true}else{if(z.includes("alert-read-more-target-")){$('[name="'+z+'"]')[0].checked=y}else{if(z.includes("alert-icon-")){var x=w.parentNode;a(x);if(""!==y){$(x).find('[title="'+y+'"]')[0].classList.add("selected")}}if(z.includes("alert-read-more-")&&!z.includes("alert-read-more-url-")){if(y){w.checked=true;w.parentNode.parentNode.nextElementSibling.classList.remove("hidden")}else{w.checked=false;w.parentNode.parentNode.nextElementSibling.classList.add("hidden")}}else{w.value=y}}}})}else{for(var u=0;u<n.length;u++){var s=n[u];if((s.name.includes("alert-display-")&&"home"==s.value)||(s.name.includes("alert-read-more-target-")&&"_blank"==s.value)){s.checked=true}else{if(s.name.includes("alert-read-more-")&&"checkbox"==s.type){s.checked=false;s.parentNode.parentNode.nextElementSibling.classList.add("hidden")}else{if(s.name.includes("alert-banner-color-")){var r=$("#ca_site_color_scheme")[0];var q=r.options[r.selectedIndex].value;s.value=args.caweb_colors[q]["highlight"]}else{if(s.name.includes("alert-icon-")){var t=s.parentNode;a(t)}s.value=""}}}}}tb_remove()}$(".resetGoogleIcon").click(function(n){a(this.parentNode.nextElementSibling.firstElementChild)});$("#caweb-icon-menu li").click(function(n){f(this)});$('[name="ca_google_trans_enabled"]').click(function(n){if("custom"!==this.value){this.parentNode.parentNode.parentNode.nextElementSibling.classList.add("hidden");this.parentNode.parentNode.parentNode.nextElementSibling.nextElementSibling.classList.add("hidden");this.parentNode.parentNode.parentNode.nextElementSibling.nextElementSibling.nextElementSibling.classList.add("hidden")}else{if("custom"==this.value){this.parentNode.parentNode.parentNode.nextElementSibling.classList.remove("hidden");this.parentNode.parentNode.parentNode.nextElementSibling.nextElementSibling.classList.remove("hidden");this.parentNode.parentNode.parentNode.nextElementSibling.nextElementSibling.nextElementSibling.classList.remove("hidden")}}});function f(q,n){var p=q.parentNode.getElementsByTagName("LI");for(o=0;o<p.length-1;o++){p[o].classList.remove("selected")}q.classList.add("selected");if(n){q.parentNode.lastElementChild.value=q.title}}function a(p){p.lastElementChild.value="";var n=p.getElementsByTagName("LI");for(o=0;o<n.length-1;o++){n[o].classList.remove("selected")}}$('[name="caweb_options_submit"]').click(function(s){s.preventDefault();var n=$("#caweb-alert-settings").find("INPUT");var r=document.createElement("DIV");this.nextElementSibling.value="on";r.className="hidden";for(var q=0;q<n.length;q++){var p=n[q];if(((p.name.includes("alert-display-")||p.name.includes("alert-read-more-target-"))&&p.checked)||(!p.name.includes("alert-display-")&&!p.name.includes("alert-read-more-target-"))){r.append(n[q])}}$("#ca-options-form").append(r);$("#ca-options-form").submit()})});jQuery(document).ready(function(){$=jQuery.noConflict();var b=$("#menu-to-edit").children().length;if(document.getElementById("description-hide")!==null){document.getElementById("description-hide").parentNode.style.visibility="hidden"}$(".item-edit").click(a);$("ul.menu-icon-list li").click(d);$(".unit-size-selector").change(c);$("#menu-to-edit").on("DOMSubtreeModified",function(l){if(b<$("#menu-to-edit").children().length){b=$("#menu-to-edit").children().length;var e=this.getElementsByClassName("pending");for(var h=0;h<e.length;h++){var k=e.item(h).id.substring(e.item(h).id.lastIndexOf("-")+1);var g=document.getElementById("menu-icon-list-"+k).getElementsByTagName("li");document.getElementById("edit-"+k).addEventListener("click",a);for(var f=0;f<g.length;f++){g.item(f).addEventListener("click",d)}document.getElementById("unit-size-selector-"+k).addEventListener("change",c);document.getElementById("library-link-"+k).addEventListener("click",(function(m){var n;var j;m(function(){var p=m(".available-headers");p.imagesLoaded(function(){p.masonry({itemSelector:".default-header",isRTL:!!("undefined"!=typeof isRtl&&isRtl)})});m(".library-link").click(function(t){var s=m(this);j=this.name;t.preventDefault();var r=s.data("option");var v=s.data("uploader");var q=v?"":"hidden-upload";var u=s.data("icon-check")&&s.attr("data-icon-check");if(!!r&&r.indexOf(",")>0){r=r.split(",")}if(n){}n=wp.media.frames.customHeader=wp.media({title:s.data("choose"),library:{type:r},uploader:v,button:{text:s.data("update"),close:true}});n.on("select",function(){var A=n.state().get("selection").first(),y=s.data("updateLink");var w=A.attributes.url.split("/");w=w[w.length-1];var C=document.getElementById(j);var x=document.getElementById(j+"_img");var B=document.getElementById(j+"_filename");var z={action:"caweb_fav_icon_check",icon_url:A.attributes.url,};if(!u){C.value=A.attributes.url;if(null!==x){x.src=A.attributes.url}if(null!==B){B.value=w}}else{jQuery.post(ajaxurl,z,function(D){if(1==D){C.value=A.attributes.url;x.src=A.attributes.url;B.value=w}else{alert("Invalid Icon Mime Type: "+w)}})}});n.on("open",function(){if(!v){var w=n.el.getElementsByClassName("media-frame-router")[0].getElementsByClassName("media-router")[0].getElementsByClassName("media-menu-item");w[1].click();w[0].parentNode.removeChild(w[0])}});n.open()})})}(jQuery)))}}});function a(){var p=this.id.substring(this.id.lastIndexOf("-")+1);var k=document.getElementById("menu-item-"+p);var h=k.className;var g=document.getElementById("menu-item-settings-"+p);var l=g.getElementsByClassName("unit-size-selector")[0];var e=l.options[l.selectedIndex].value;var f=g.getElementsByClassName("media_image")[0];var j=g.getElementsByClassName("field-description")[0];var n=g.getElementsByClassName("mega_menu_images")[0];var m=g.getElementsByClassName("icon_selector")[0];if(-1!=h.indexOf("menu-item-depth-0")){n.classList.add("show");m.classList.add("show");f.classList.remove("show");j.classList.add("hidden-field")}else{n.classList.remove("show");l.parentNode.classList.add("show");if("unit1"!=e){j.classList.remove("hidden-field")}else{j.classList.add("hidden-field")}if("unit3"==e){f.classList.add("show")}else{f.classList.remove("show")}}}function d(){var g=this.parentNode.id.substring(this.parentNode.id.lastIndexOf("-")+1);document.getElementById(g+"_icon").value=this.attributes.name.value;var e=this.parentNode.getElementsByClassName("icon-option");for(var f=0;f<e.length;f++){e.item(f).classList.remove("is_selected")}this.classList.toggle("is_selected")}function c(){var g=this.id.substring(this.id.lastIndexOf("-")+1);var j=this.value;var f=document.getElementById("menu-item-settings-"+g);var h=f.getElementsByClassName("media_image")[0];var k=f.getElementsByClassName("field-description")[0];var e=f.getElementsByClassName("icon_selector")[0];if("unit1"!=j){k.classList.remove("hidden-field")}else{k.classList.add("hidden-field")}if("unit3"==j){h.classList.add("show");e.classList.remove("show")}else{h.classList.remove("show");e.classList.add("show")}}});
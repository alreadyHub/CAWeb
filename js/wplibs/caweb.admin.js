jQuery(document).ready(function(){$=jQuery.noConflict();var d=false;$(window).on("beforeunload",function(){if(d&&"nav-menus.php"!==args.changeCheck){return"Are you sure you want to leave?"}});$('textarea, #ca_default_navigation_menu, select, input[type="text"], input[type="checkbox"], input[type="password"] ').change(function(g){d=true});$('input[type="button"]').click(function(g){d=true});$("#ca-options-form").submit(function(){d=false;this.submit()});$(".caweb-nav-tab").click(function(){var g=document.getElementsByClassName("caweb-nav-tab");var h=this.getAttribute("name");for(i=0;i<g.length;i++){if(h!==g[i].getAttribute("name")){g[i].classList.remove("nav-tab-active");document.getElementById(g[i].getAttribute("name")).classList.add("hidden")}else{g[i].classList.add("nav-tab-active");document.getElementById(h).classList.remove("hidden")}}document.getElementById("tab_selected").value=h});$("#ca_site_version").change(function(){var p=this.options[this.selectedIndex].value;var h=document.getElementsByClassName("extra");var g=document.getElementsByClassName("base");var q=$("#general table:first tr:nth-child(6)");var r=$("#ca_site_color_scheme")[0];var k=r.options[r.selectedIndex].value;var n=false;for(var m=0;m<h.length;m++){if(p>=5){h[m].classList.remove("hidden");for(var l=0;l<g.length;l++){g[l].classList.add("hidden")}if(!$("#ca_google_search_id").val().trim()){q.addClass("hidden")}else{q.removeClass("hidden")}}else{h[m].classList.add("hidden");if(h[m].value==k&&h[m].classList.contains("extra")){n=true}for(var l=0;l<g.length;l++){g[l].classList.remove("hidden")}}}if(n){for(var m=0;m<r.options.length;m++){if(!r.options[m].classList.contains("extra")){r.selectedIndex=m;break}}}});$("#resetIcon").click(function(){var g=args.defaultFavIcon;document.getElementById("ca_fav_ico").value=g;document.getElementById("ca_fav_ico_img").src=g;document.getElementById("ca_fav_ico_filename").value="favicon.ico"});$("#ca_google_search_id").on("input",function(g){var j=$("#general table:first tr:nth-child(6)");var h=$("#ca_site_version option:selected").val();if(!this.value.trim()){j.addClass("hidden")}else{if(5<=h){j.removeClass("hidden")}}});$(".removeStyle").click(function(h){h.preventDefault();var g=confirm("Are you sure you want to "+this.title+"? This can not be undone.");if(g==true){d=true;this.parentNode.remove()}});$("#uploadedCSS").sortable();$("#uploadedCSS").disableSelection();$("#addCSS").click(function(m){var j=$("#custom-css table:first");var g=j.children().children().length;var n=document.createElement("TR");var l=document.createElement("TD");var p=document.createElement("A");var k=document.createElement("TD");var h=document.createElement("Input");n.classList="pending-stylesheet";p.classList="dashicons dashicons-dismiss removeStyle";h.type="file";h.name=g+"_upload";h.id=g+"_upload";h.accept=".css";p.addEventListener("click",function(s){s.preventDefault();var q=""!==this.title?confirm("Are you sure you want to "+this.title+"? This can not be undone."):true;if(q==true){d=true;this.parentNode.parentNode.remove()}});h.addEventListener("change",function(){var q=this.value.substring(this.value.lastIndexOf("\\")+1);var r=q.lastIndexOf(".")>0?q.substring(q.lastIndexOf(".")+1).toLowerCase():"";if(""===r||"css"!==r){alert(q+" isn't a valid CSS extension and was not uploaded.");this.parentNode.remove()}else{p.title="remove "+q}});k.append(p);k.append(h);n.append(l);n.append(k);j.append(n);d=true});$("#cawebAlerts").sortable();$("#cawebAlerts").disableSelection();$("#addAlertBanner").click(function(Q){$("#caweb_alert_count").val(function(V,W){return ++W});var l=$("#cawebAlerts");var j=document.createElement("LI");var v=l[0].childElementCount;var t=document.createElement("DIV");var m=document.createElement("PRE");var u=document.createElement("P");var P=document.createElement("A");var J=document.createElement("A");var A=document.createElement("A");var h=document.createElement("DIV");var K=document.createElement("INPUT");var N=document.createElement("P");var E=document.createElement("TEXTAREA");var g=document.createElement("DIV");var k=document.createElement("DIV");var s=document.createElement("P");var U=document.createElement("LABEL");var r=document.createElement("INPUT");var T=document.createElement("LABEL");var y=document.createElement("INPUT");var n=document.createElement("P");var O=document.createElement("INPUT");var H=document.createElement("P");var S=document.createElement("LABEL");var p=document.createElement("INPUT");var G=document.createElement("DIV");var z=document.createElement("P");var x=document.createElement("INPUT");var R=document.createElement("LABEL");var M=document.createElement("INPUT");var D=document.createElement("INPUT");var w=document.createElement("P");var C=document.createElement("SPAN");var I=document.createElement("UL");var L=document.createElement("INPUT");g.id="caweb-alert-"+v;g.style.display="none";k.classList="caweb-alert-"+v;s.innerHTML="Display on";r.type="radio";r.name="alert-display-"+v;r.value="home";r.checked=true;U.appendChild(r);U.appendChild(document.createTextNode("Home Page Only"));y.type="radio";y.name="alert-display-"+v;y.value="all";T.appendChild(y);T.appendChild(document.createTextNode("All Pages"));n.innerHTML="Banner Color";var F=$("#ca_site_color_scheme")[0];var B=F.options[F.selectedIndex].value;O.type="color";O.name="alert-banner-color-"+v;O.value=args.caweb_colors[B]["highlight"];S.innerHTML="Add Read More Button ";p.type="checkbox";p.classList="alert-read-more";p.name="alert-read-more-"+v;p.addEventListener("click",function(V){e(this)});S.appendChild(p);H.appendChild(S);z.innerHTML="Read More Button URL";x.type="text";x.name="alert-read-more-url-"+v;R.innerHTML="Open link in ";M.type="radio";M.name="alert-read-more-target-"+v;M.checked=true;M.value="_blank";D.type="radio";D.name="alert-read-more-target-"+v;D.value="";R.appendChild(M);R.appendChild(document.createTextNode("New Tab "));R.appendChild(D);R.appendChild(document.createTextNode("Current Tab"));G.classList="hidden";G.appendChild(z);G.appendChild(x);G.appendChild(R);w.innerHTML="Add Icon ";C.classList="dashicons dashicons-image-rotate resetAlertIcon";C.addEventListener("click",function(V){b(this.parentNode.nextElementSibling)});w.appendChild(C);I.id="caweb-icon-menu";for(i=0;i<args.caweb_icons.length;i++){var q=document.createElement("LI");q.classList="icon-option ca-gov-icon-"+args.caweb_icons[i];q.title=args.caweb_icons[i];q.addEventListener("click",function(V){c(this)});I.appendChild(q)}L.name="alert-icon-"+v;L.type="hidden";I.appendChild(L);t.classList="caweb-alert";P.name="Alert Settings";P.classList="thickbox dashicons dashicons-menu";P.href="#TB_inline?width=600&height=550&inlineId=caweb-alert-"+v;J.classList="dashicons dashicons-dismiss removeAlert";J.addEventListener("click",function(V){a(this)});A.classList="dashicons dashicons-arrow-up";A.addEventListener("click",function(V){f(this)});u.innerHTML="Header";m.appendChild(u);m.appendChild(J);m.appendChild(P);m.appendChild(A);h.appendChild(K);h.appendChild(N);h.appendChild(E);K.name="alert-header-"+v;K.type="text";N.innerHTML="Message";E.form="ca-options-form";E.name="alert-message-"+v;j.classList="pending-alert";k.appendChild(s);k.appendChild(U);k.appendChild(T);k.appendChild(n);k.appendChild(O);k.appendChild(H);k.appendChild(G);k.appendChild(w);k.appendChild(I);t.appendChild(m);t.appendChild(h);g.appendChild(k);j.appendChild(g);j.appendChild(t);l.append(j);d=true});$(".caweb-alert pre a:last-child").click(function(g){f(this)});$(".removeAlert").click(function(g){a(this)});$(".alert-read-more").click(function(g){e(this)});$(".resetAlertIcon").click(function(g){b(this.parentNode.nextElementSibling)});function f(g){g.parentNode.nextSibling.classList.toggle("hidden");if(g.parentNode.nextSibling.classList.contains("hidden")){g.parentNode.firstChild.innerHTML=""!==g.parentNode.nextSibling.firstChild.value.trim()?g.parentNode.nextSibling.firstChild.value:"Header";g.classList.remove("dashicons-arrow-up");g.classList.add("dashicons-arrow-down")}else{g.parentNode.firstChild.innerHTML="Header";g.classList.remove("dashicons-arrow-down");g.classList.add("dashicons-arrow-up")}}function a(h){var g=confirm("Are you sure you want to remove this alert? This can not be undone.");if(g==true){d=true;$("#caweb_alert_count").val(function(j,k){return --k});h.parentNode.parentNode.parentNode.remove()}}function e(g){g.parentNode.parentNode.nextSibling.classList.toggle("hidden")}$(".resetGoogleIcon").click(function(g){b(this.parentNode.nextElementSibling.firstElementChild)});$("#caweb-icon-menu li").click(function(g){c(this)});$('[name="ca_google_trans_enabled"]').click(function(g){if("custom"!==this.value){this.parentNode.parentNode.parentNode.nextElementSibling.classList.add("hidden");this.parentNode.parentNode.parentNode.nextElementSibling.nextElementSibling.classList.add("hidden");this.parentNode.parentNode.parentNode.nextElementSibling.nextElementSibling.nextElementSibling.classList.add("hidden")}else{if("custom"==this.value){this.parentNode.parentNode.parentNode.nextElementSibling.classList.remove("hidden");this.parentNode.parentNode.parentNode.nextElementSibling.nextElementSibling.classList.remove("hidden");this.parentNode.parentNode.parentNode.nextElementSibling.nextElementSibling.nextElementSibling.classList.remove("hidden")}}});function c(h){var g=h.parentNode.getElementsByTagName("LI");for(o=0;o<g.length-1;o++){g[o].classList.remove("selected")}h.classList.add("selected");h.parentNode.lastElementChild.value=h.title}function b(h){h.lastElementChild.value="";var g=h.getElementsByTagName("LI");for(o=0;o<g.length-1;o++){g[o].classList.remove("selected")}}});jQuery(document).ready(function(){$=jQuery.noConflict();var b=$("#menu-to-edit").children().length;if(document.getElementById("description-hide")!==null){document.getElementById("description-hide").parentNode.style.visibility="hidden"}$(".item-edit").click(a);$("ul.menu-icon-list li").click(d);$(".unit-size-selector").change(c);$("#menu-to-edit").on("DOMSubtreeModified",function(l){if(b<$("#menu-to-edit").children().length){b=$("#menu-to-edit").children().length;var e=this.getElementsByClassName("pending");for(var h=0;h<e.length;h++){var k=e.item(h).id.substring(e.item(h).id.lastIndexOf("-")+1);var g=document.getElementById("menu-icon-list-"+k).getElementsByTagName("li");document.getElementById("edit-"+k).addEventListener("click",a);for(var f=0;f<g.length;f++){g.item(f).addEventListener("click",d)}document.getElementById("unit-size-selector-"+k).addEventListener("change",c);document.getElementById("library-link-"+k).addEventListener("click",(function(m){var n;var j;m(function(){var p=m(".available-headers");p.imagesLoaded(function(){p.masonry({itemSelector:".default-header",isRTL:!!("undefined"!=typeof isRtl&&isRtl)})});m(".library-link").click(function(t){var s=m(this);j=this.name;t.preventDefault();var r=s.data("option");var v=s.data("uploader");var q=v?"":"hidden-upload";var u=s.data("icon-check")&&s.attr("data-icon-check");if(!!r&&r.indexOf(",")>0){r=r.split(",")}if(n){}n=wp.media.frames.customHeader=wp.media({title:s.data("choose"),library:{type:r},uploader:v,button:{text:s.data("update"),close:true}});n.on("select",function(){var A=n.state().get("selection").first(),y=s.data("updateLink");var w=A.attributes.url.split("/");w=w[w.length-1];var C=document.getElementById(j);var x=document.getElementById(j+"_img");var B=document.getElementById(j+"_filename");var z={action:"caweb_fav_icon_check",icon_url:A.attributes.url,};if(!u){C.value=A.attributes.url;if(null!==x){x.src=A.attributes.url}if(null!==B){B.value=w}}else{jQuery.post(ajaxurl,z,function(D){if(1==D){C.value=A.attributes.url;x.src=A.attributes.url;B.value=w}else{alert("Invalid Icon Mime Type: "+w)}})}});n.on("open",function(){if(!v){var w=n.el.getElementsByClassName("media-frame-router")[0].getElementsByClassName("media-router")[0].getElementsByClassName("media-menu-item");w[1].click();w[0].parentNode.removeChild(w[0])}});n.open()})})}(jQuery)))}}});function a(){var p=this.id.substring(this.id.lastIndexOf("-")+1);var k=document.getElementById("menu-item-"+p);var h=k.className;var g=document.getElementById("menu-item-settings-"+p);var l=g.getElementsByClassName("unit-size-selector")[0];var e=l.options[l.selectedIndex].value;var f=g.getElementsByClassName("media_image")[0];var j=g.getElementsByClassName("field-description")[0];var n=g.getElementsByClassName("mega_menu_images")[0];var m=g.getElementsByClassName("icon_selector")[0];if(-1!=h.indexOf("menu-item-depth-0")){n.classList.add("show");m.classList.add("show");f.classList.remove("show");j.classList.add("hidden-field")}else{n.classList.remove("show");l.parentNode.classList.add("show");if("unit1"!=e){j.classList.remove("hidden-field")}else{j.classList.add("hidden-field")}if("unit3"==e){f.classList.add("show")}else{f.classList.remove("show")}}}function d(){var g=this.parentNode.id.substring(this.parentNode.id.lastIndexOf("-")+1);document.getElementById(g+"_icon").value=this.attributes.name.value;var e=this.parentNode.getElementsByClassName("icon-option");for(var f=0;f<e.length;f++){e.item(f).classList.remove("is_selected")}this.classList.toggle("is_selected")}function c(){var g=this.id.substring(this.id.lastIndexOf("-")+1);var j=this.value;var f=document.getElementById("menu-item-settings-"+g);var h=f.getElementsByClassName("media_image")[0];var k=f.getElementsByClassName("field-description")[0];var e=f.getElementsByClassName("icon_selector")[0];if("unit1"!=j){k.classList.remove("hidden-field")}else{k.classList.add("hidden-field")}if("unit3"==j){h.classList.add("show");e.classList.remove("show")}else{h.classList.remove("show");e.classList.add("show")}}});